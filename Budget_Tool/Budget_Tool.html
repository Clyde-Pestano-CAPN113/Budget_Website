<!--Bud-->
<html>
    <link rel="stylesheet" href="Budget.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <body>
        <!--Start of logo and nav-->
        <header>
            <a href="../home-page/home-page.html">
              <img src="../image/logo.png" alt="logo" class="logo">
            </a>
            <div class="search-container">
              <input type="text" placeholder="Search...">
              <button type="submit">Search</button>
            </div>
          </header>
        
          <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container-fluid">
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="benefitsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Benefits
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="benefitsDropdown">
                      <li><a class="dropdown-item" href="../Information-webpage/Benefits.html">Benefits and Work</a></li>
                      <li><a class="dropdown-item" href="https://www.canada.ca/en/revenue-agency/services/child-family-benefits.html">Benefits if You Have Children</a></li>
                      <li><hr class="dropdown-divider"></li>
                      <li><a class="dropdown-item" href="https://www.canada.ca/en/revenue-agency/services/child-family-benefits/child-family-benefits-calculator.html">Benefits Calculator</a></li>
                    </ul>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="benefitsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Everyday Money
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="benefitsDropdown">
                      <li><a class="dropdown-item" href="../Information-webpage/Insurance.html">Isurance</a></li>
                      <li><hr class="dropdown-divider"></li>
                      <li><a class="dropdown-item" href="../Budget_Tool/Budget_Planner.html">Budget Planner</a></li>
                    </ul>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Family & Care
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <li><a class="dropdown-item" href="../Information-webpage/Childcare.html">Childcare</a></li>
                      <li><a class="dropdown-item" href="https://caringforseniors.ca/?gad_source=1&gclid=CjwKCAiA3ZC6BhBaEiwAeqfvyuoGVgvo5QK00PO8BqNRgRR1SpnEO3q_JIBe9fGCJPIb9r5aNgpu0xoClwkQAvD_BwE">Elder Care</a></li>
                      <li><hr class="dropdown-divider"></li>
                      <li><a class="dropdown-item" href="https://www.babycenter.com/baby-cost-calculator">Baby costs calculator</a></li>
                    </ul>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="benefitsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      House
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="benefitsDropdown">
                      <li><a class="dropdown-item" href="../Information-webpage/Renting.html">Renting</a></li>
                      <li><a class="dropdown-item" href="https://www.canada.ca/en/financial-consumer-agency/services/buying-home.html">Mortgages and Homebuying</a></li>
                      <li><hr class="dropdown-divider"></li>
                      <li><a class="dropdown-item" href="#">Mortgage Calculator</a></li>
                    </ul>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="benefitsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Pensions
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="benefitsDropdown">
                      <li><a class="dropdown-item" href="">Tax and Pensions</a></li>
                      <li><hr class="dropdown-divider"></li>
                      <li><a class="dropdown-item" href="https://www.canada.ca/en/services/benefits/publicpensions/cpp/retirement-income-calculator.html">Pension Calculator</a></li>
                    </ul>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="benefitsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Savings
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="benefitsDropdown">
                      <li><a class="dropdown-item" href="#">How to save</a></li>
                      <li><a class="dropdown-item" href="#">Investing</a></li>
                    </ul>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle text-white" href="#" id="benefitsDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Tools and calculators
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="benefitsDropdown">
                      <li><a class="dropdown-item" href="#">Benefits Calculator</a></li>
                      <li><a class="dropdown-item" href="#">Baby Costs Calculator</a></li>
                      <li><a class="dropdown-item" href="#">Mortgage Calculator</a></li>
                      <li><a class="dropdown-item" href="#">Pension Calculator</a></li>
                      <li><a class="dropdown-item" href="#">Savings Calculatorr</a></li>
                      <li><a class="dropdown-item" href="#">Redundancy pay Calculator</a></li>
                      <li><a class="dropdown-item" href="../Budget_Tool/Budget_Planner.html">Budget Planner</a></li>
                      
                    </ul>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
          <!--End of navbar and above-->
        <!--On click it runs function SetBudget-->
        <section style="padding-left: 70px; padding-top: 30px;">
            <h1>Budget Planner</h1>
            <u><p>Put the amount of money you have here</p></u> 
            <button onclick="SetBudget()">Set Budget</button>
            <input type="text" id="YourMoneyHere">
            <p id="YourMoney">Curret amount</p>
            <!--We know ask for the users input for a name and price/number-->
            <input type="text" placeholder="Type Name of Product" id="ProductName">
            <input type="text" placeholder="Type Price of Product"id="ProductPrice"> 
            <button type="button" onclick="CreateExpense()">Enter</button>
        </section>

        <section style="padding-left: 70px; padding-top: 30px; padding-right: 100px;">
            <table class="table table-dark table-bordered table-responsive-md">
                <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Price</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody id="tb1">
                </tbody>
                <h3 id = "Status"></h3>
            </table>      
        </section>
         
    <script type="text/javascript">
        //Here are the currently set values that can be changed with user input
        let ExpensesCost = []
        let budget = 0
        let total = 0
        //Turns the user input into a number and the budget is now that number, it also resets all values.
        function SetBudget(){
            budget = Number((document.getElementById("YourMoneyHere").value))
            document.getElementById("YourMoney").innerHTML = budget;
            ExpensesCost.length = 0
            total = 0
            document.getElementById("AllAdded").innerHTML = 0
            document.getElementById("tb1").innerHTML = ""
        }
        //Returns the current value of the budget
        function GetBudget(){
            budget = Number((document.getElementById("YourMoneyHere").value))
            return budget
        }
        //Inside of this function I use javascript to create a templete html to add to table with the id tb1
        function CreateExpense(){
            let productName = document.getElementById("ProductName").value;
            let productPrice = Number(document.getElementById("ProductPrice").value) 
            if (productPrice <= 0 || budget == 0){
                document.getElementById("Status").innerHTML = "Please Enter Vaild Amount Or Set budget"
            }else if (productPrice > budget){
                document.getElementById("Status").innerHTML = "Not enough money"
            }else{
                ExpensesCost.push(Number(productPrice))
                let template = `
                        <tr>
                             <th scope="row">${productName}</th>
                            <td>${productPrice}</td>
                            <td><button onclick="RemoveExpense(this, ${productPrice}, GetBudget())">Del</button></td>
                        </tr>`;
                document.getElementById("tb1").innerHTML += template    
                AddUpExpenses()
            }           
        }
        //We look at the button on the row to call this function, find the parents its attached to and remove it from the row and array
        function RemoveExpense(ItemId, ItemPrice, currentbud) {
    // Find the row to remove
    let row = ItemId.parentElement.parentElement;

    for (let i = 0; i < ExpensesCost.length; i++) {
        if (ExpensesCost[i] == ItemPrice) {
            ExpensesCost.splice(i, 1);
            break;
        }
    }

    row.parentElement.removeChild(row);
    total = 0;
    for (let i = 0; i < ExpensesCost.length; i++) {
        total += ExpensesCost[i];
    }

    budget = GetBudget() - total;

    // Update the UI
    document.getElementById("YourMoney").innerHTML = budget;
}
        function AddUpExpenses(){
            total = 0
            budget = GetBudget()
            for (let i = 0; i < ExpensesCost.length; i++){
                total += ExpensesCost[i]; 
                budget = budget - ExpensesCost[i];
            }  
            document.getElementById("YourMoney").innerHTML = budget
            return budget
        }
    </script>
    <script type="module" src="Main.js"></script>
</html>

